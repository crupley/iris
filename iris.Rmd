---
title: "iris"
author: "crupley"
date: "Wednesday, February 04, 2015"
output: html_document
---

# Introduction


# Data Exploration

```{r setup, echo=FALSE}
dat <- read.csv("./data/iris.data", header = FALSE)
names(dat) <- c("sepal.length",
                "sepal.width",
                "petal.length",
                "petal.width",
                "class")

library(RColorBrewer)
palette(brewer.pal(6, "Set2"))
```

First, let's take a look at the structure of the data. The set contains 150 observations of measurements on 4 different aspects of iris flowers and they are classified as one of 3 different species of iris. There are 50 observations of each species. An example observation of each species from the dataset is shown below.

```{r example, echo=FALSE}
print(dat[c(1, 51, 101),])
```

In order to visualize the data, we can plot the four variables against each other pairwise in a XXX plot.

```{r, initial plot, echo=FALSE}
plot(dat[,-5], col = dat$class, pch = 16, cex = 0.5)
```

```{r, echo=FALSE}
plot(1,1,xaxt = "n",yaxt="n",xlab="",ylab="",type="n")
legend("bottom", levels(dat$class), pch = 16, col = palette()[1:3],
       horiz = TRUE)
```

Looking at the data this way can help show us why this dataset has been has been of interest for clustering data. In each of the plots above, the species of iris group together nicely in their measurements with the possible exception of the sepal length / width of the XXX and XXX species. For simplicity from here forward, I will only look at one of the above plots, petal length vs petal width, though I will continue to use all 4 variables for the analysis.


```{r general functions, echo=FALSE}
source("iris-functions.R")
```

```{r petal plot, echo=FALSE}
plot.iris(dat)
```

# Clustering

```{r 3 plot, fig.height=3}
# initialize parameters
k <- 3  # number of clusters
m <- dim(dat)[1]  # number of examples

par(mfrow = c(1,3))
for(i in 1:3){
    # initialize centroids to k random data points from set
    set.seed(18*i)
    centroid <- dat[sample(1:m, k),-5]
    
    # assign each datapoint to the nearest centroid
    clust <- cluster(dat, centroid)
    
    # plot results
    plot.iris(dat, centroid, clust)
    
    }

```


```{r}
clust <- cluster(dat, centroid)

print(data.frame(Iteration = 1, 
                 Accuracy = round(class.accuracy(dat$class, clust)[1], 4)))
# update.plot(dat, centroid, clust)

for(i in 2:10){
    centroid <- update.centroid(dat, clust)
    clust <- cluster(dat, centroid)
    print(data.frame(Iteration = i, 
                     Accuracy = round(class.accuracy(dat$class, clust)[1], 4)))
#     update.plot(dat, centroid, clust)
}
```

# Appendix: code for functions used

```{r child="iris-functions.R"}
```
